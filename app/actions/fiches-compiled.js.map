{"version":3,"sources":["fiches.js"],"names":[],"mappings":";;;;;QAUgB,gB,GAAA,gB;QAKA,W,GAAA,W;QAMA,M,GAAA,M;QAMA,W,GAAA,W;QAMA,kB,GAAA,kB;QASA,gB,GAAA,gB;QAQA,O,GAAA,O;QAOA,kB,GAAA,kB;QAMA,kB,GAAA,kB;QAOA,iB,GAAA,iB;QAOA,gB,GAAA,gB;QAMA,gB,GAAA,gB;QAOA,W,GAAA,W;QAmBA,U,GAAA,U;QAcA,Y,GAAA,Y;QASA,S,GAAA,S;;AAhIhB;;AACA;;;;AACA;;;;AACA;;IAAY,K;;;;;;AAPZ;;;AAGA;AAMA;AACO,SAAS,gBAAT,CAA0B,MAA1B,EAAkC,EAAlC,EAAsC,IAAtC,EAA6D;AAAA,QAAjB,GAAiB,uEAAX,SAAW;;AAChE,WAAO,gBAAQ,MAAR,EAAgB,OAAO,KAAM,MAAM,EAAZ,GAAkB,EAAzB,CAAhB,EAA8C,IAA9C,CAAP;AACH;;AAED;AACO,SAAS,WAAT,GAAuB;AAC1B,WAAO;AACH,cAAM,MAAM,UADT;AAEH,iBAAS,iBAAiB,KAAjB;AAFN,KAAP;AAIH;AACM,SAAS,MAAT,CAAgB,EAAhB,EAAmB;AACtB,WAAO;AACH,cAAM,MAAM,SADT;AAEH,iBAAS,iBAAiB,KAAjB,EAAuB,EAAvB;AAFN,KAAP;AAIH;AACM,SAAS,WAAT,GAAuB;AAC1B,WAAO;AACH,cAAM,MAAM;AADT,KAAP;AAGH;;AAEM,SAAS,kBAAT,CAA4B,IAA5B,EAAkC;AACrC,WAAO;AACH,cAAM,MAAM,oBADT;AAEH,YAAI,KAAK,EAFN;AAGH,cAAM,KAAK,IAHR;AAIH,cAAM,KAAK;AAJR,KAAP;AAMH;;AAEM,SAAS,gBAAT,CAA0B,IAA1B,EAA+B;AAClC,WAAO;AACH,cAAM,MAAM,kBADT;AAEH,YAAG,KAAK,EAFL;AAGH,cAAM,KAAK,IAHR;AAIH,cAAO,KAAK;AAJT,KAAP;AAMH;AACM,SAAS,OAAT,CAAiB,EAAjB,EAAoB;AACvB,WAAO;AACH,cAAM,MAAM,aADT;AAEH,YAAK;AAFF,KAAP;AAIH;;AAEM,SAAS,kBAAT,GAA8B;AACjC,WAAO;AACH,cAAM,MAAM;AADT,KAAP;AAGH;;AAEM,SAAS,kBAAT,CAA4B,IAA5B,EAAkC;AACrC,WAAO;AACH,cAAM,MAAM,oBADT;AAEH,YAAI,KAAK,EAFN;AAGH,eAAO,KAAK;AAHT,KAAP;AAKH;AACM,SAAS,iBAAT,CAA2B,IAA3B,EAAgC;AACnC,WAAO;AACH,cAAM,MAAM,WADT;AAEH,iBAAS;AAFN,KAAP;AAIH;;AAEM,SAAS,gBAAT,CAA0B,EAA1B,EAA6B;AAChC,WAAO;AACH,cAAM,MAAM,kBADT;AAEH;AAFG,KAAP;AAIH;AACM,SAAS,gBAAT,CAA0B,IAA1B,EAAgC;AACnC,WAAM;AACF,cAAK,MAAM,kBADT;AAEF,YAAG,KAAK,EAFN;AAGF,eAAO,KAAK;AAHV,KAAN;AAKH;AACM,SAAS,WAAT,CAAqB,IAArB,EAA2B;AAC9B,WAAO,UAAC,QAAD,EAAW,QAAX,EAAwB;AAC3B,YAAM,KAAK,kBAAI,IAAJ,CAAS,KAAK,IAAd,CAAX;AACA;AACA;;AAH2B,wBAIT,UAJS;AAAA,YAInB,KAJmB,aAInB,KAJmB;AAK3B;;;AACA,iBAAS,mBAAmB,IAAnB,CAAT;AACA,eAAO,iBAAiB,MAAjB,EAAyB,EAAzB,EAA6B,IAA7B,EACF,IADE,CACG,eAAO;AACT,gBAAI,IAAI,MAAJ,KAAe,GAAnB,EAAwB;AACpB,uBAAO,SAAS,oBAAT,CAAP;AACH;AACJ,SALE,EAMF,KANE,CAMI,YAAM;AACT,mBAAO,SAAS,mBAAmB,EAAE,MAAF,EAAM,OAAO,+DAAb,EAAnB,CAAT,CAAP;AACH,SARE,CAAP;AASH,KAhBD;AAiBH;AACM,SAAS,UAAT,OAAkC;AAAA,QAAZ,IAAY,QAAZ,IAAY;AAAA,QAAN,IAAM,QAAN,IAAM;;AACrC,WAAO,UAAC,QAAD,EAAc;AACjB,YAAI,KAAK,kBAAI,IAAJ,CAAS,IAAT,CAAT;AACA,iBAAS,mBAAmB,EAAC,MAAD,EAAK,UAAL,EAAW,UAAX,EAAnB,CAAT;AACA,eAAO,iBAAiB,MAAjB,EAAyB,EAAzB,EAA6B,EAAE,MAAF,EAAM,UAAN,EAAY,UAAZ,EAA7B,EACF,IADE,CACG,eAAO;AACT,gBAAG,IAAI,MAAJ,KAAc,GAAjB,EAAsB;AAClB,uBAAO,SAAS,kBAAkB,IAAI,IAAtB,CAAT,CAAP;AACH;AACJ,SALE,EAMF,KANE,CAMI;AAAA,mBAAM,SAAS,mBAAmB,EAAC,MAAD,EAAK,OAAO,+DAAZ,EAAnB,CAAT,CAAN;AAAA,SANJ,CAAP;AAOH,KAVD;AAWH;;AAEM,SAAS,YAAT,CAAsB,EAAtB,EAAyB;AAC5B,WAAO,UAAC,QAAD,EAAc;AACjB,eAAO,iBAAiB,QAAjB,EAA2B,EAA3B,EACF,IADE,CACG;AAAA,mBAAM,SAAS,QAAQ,EAAR,CAAT,CAAN;AAAA,SADH,EAEF,KAFE,CAEI;AAAA,mBAAM,SAAS,mBAAmB,EAAC,MAAD;AACrC,uBAAO,gEAD8B,EAAnB,CAAT,CAAN;AAAA,SAFJ,CAAP;AAIH,KALD;AAMH;;AAEM,SAAS,SAAT,QAAoC;AAAA,QAAhB,EAAgB,SAAhB,EAAgB;AAAA,QAAZ,IAAY,SAAZ,IAAY;AAAA,QAAN,IAAM,SAAN,IAAM;;AACvC,WAAO,UAAC,QAAD,EAAc;AACjB,iBAAS,iBAAiB,EAAC,MAAD,EAAK,UAAL,EAAW,UAAX,EAAjB,CAAT;AACA,eAAO,iBAAiB,KAAjB,EAAwB,EAAxB,EAA4B,EAAC,MAAD,EAAK,UAAL,EAAW,UAAX,EAA5B,EACF,IADE,CACG,UAAC,GAAD,EAAS;AAAC,gBAAG,IAAI,MAAJ,KAAe,GAAlB,EAAuB;AACnC,uBAAO,SAAS,iBAAiB,IAAI,IAArB,CAAT,CAAP;AAA6C;AAAC,SAF/C,EAGF,KAHE,CAGI;AAAA,mBAAO,iBAAiB,EAAC,MAAD;AAC3B,uBAAO,6DADoB,EAAjB,CAAP;AAAA,SAHJ,CAAP;AAKH,KAPD;AAQH","file":"fiches-compiled.js","sourcesContent":["/**\r\n * Created by hasj on 21/11/2016.\r\n */\r\n/* eslint consistent-return: 0, no-else-return: 0*/\r\nimport { polyfill } from 'es6-promise';\r\nimport request from 'axios';\r\nimport md5 from 'spark-md5';\r\nimport * as types from 'types';\r\n\r\npolyfill();\r\nexport function makeFicheRequest(method, id, data, api = '/fiches') {\r\n    return request[method](api + (id ? ('/' + id) : ''), data);\r\n}\r\n\r\n// Fetch fiche logic\r\nexport function fetchFiches() {\r\n    return {\r\n        type: types.GET_FICHES,\r\n        promise: makeFicheRequest('get')\r\n    };\r\n}\r\nexport function getOne(id){\r\n    return {\r\n        type: types.GET_FICHE,\r\n        promise: makeFicheRequest('get',id)\r\n    }\r\n}\r\nexport function ficheTyping() {\r\n    return {\r\n        type: types.FICHE_TYPING,\r\n    };\r\n}\r\n\r\nexport function createFicheRequest(data) {\r\n    return {\r\n        type: types.CREATE_FICHE_REQUEST,\r\n        id: data.id,\r\n        text: data.text,\r\n        name: data.name\r\n    };\r\n}\r\n\r\nexport function editFicheRequest(data){\r\n    return {\r\n        type: types.EDIT_FICHE_REQUEST,\r\n        id:data.id,\r\n        text: data.text,\r\n        name : data.name\r\n        }\r\n}\r\nexport function destroy(id){\r\n    return {\r\n        type: types.DESTROY_FICHE,\r\n        id : id\r\n    }\r\n}\r\n\r\nexport function createFicheSuccess() {\r\n    return {\r\n        type: types.CREATE_FICHE_SUCCESS\r\n    };\r\n}\r\n\r\nexport function createFicheFailure(data) {\r\n    return {\r\n        type: types.CREATE_FICHE_FAILURE,\r\n        id: data.id,\r\n        error: data.error\r\n    };\r\n}\r\nexport function submitFormSuccess(data){\r\n    return {\r\n        type: types.SUBMIT_FORM,\r\n        payload: data\r\n    }\r\n}\r\n\r\nexport function editFicheSuccess(id){\r\n    return {\r\n        type: types.EDIT_FICHE_SUCCESS,\r\n        id\r\n    }\r\n}\r\nexport function editFicheFailure(data) {\r\n    return{\r\n        type:types.EDIT_FICHE_FAILURE,\r\n        id:data.id,\r\n        error: data.error\r\n    }\r\n}\r\nexport function createFiche(data) {\r\n    return (dispatch, getState) => {\r\n        const id = md5.hash(data.name);\r\n        // Redux thunk's middleware receives the store methods `dispatch`\r\n        // and `getState` as parameters\r\n        const { fiche } = getState();\r\n        // First dispatch an optimistic update\r\n        dispatch(createFicheRequest(data));\r\n        return makeFicheRequest('post', id, data)\r\n            .then(res => {\r\n                if (res.status === 200) {\r\n                    return dispatch(createFicheSuccess());\r\n                }\r\n            })\r\n            .catch(() => {\r\n                return dispatch(createFicheFailure({ id, error: 'Oops! Something went wrong and we couldn\\'t create your fiche'}));\r\n            });\r\n    };\r\n}\r\nexport function submitForm({ name, text}){\r\n    return (dispatch) => {\r\n        let id = md5.hash(name);\r\n        dispatch(createFicheRequest({id, name, text}));\r\n        return makeFicheRequest('post', id, { id, name, text})\r\n            .then(res => {\r\n                if(res.status ===200) {\r\n                    return dispatch(submitFormSuccess(res.data));\r\n                }\r\n            })\r\n            .catch(() => dispatch(createFicheFailure({id, error: 'Oops! Something went wrong and we couldn\\'t create your fiche'})))\r\n    }\r\n}\r\n\r\nexport function destroyFiche(id){\r\n    return (dispatch) => {\r\n        return makeFicheRequest('delete', id)\r\n            .then(() => dispatch(destroy(id)))\r\n            .catch(() => dispatch(createFicheFailure({id,\r\n                error: 'Oops! Something went wrong and we couldn\\'t destroy your fiche'})));\r\n    }\r\n}\r\n\r\nexport function editFiche({id, name, text}){\r\n    return (dispatch) => {\r\n        dispatch(editFicheRequest({id, name, text}));\r\n        return makeFicheRequest('put', id, {id, name, text})\r\n            .then((res) => {if(res.status === 200) {\r\n                return dispatch(editFicheSuccess(res.data));}})\r\n            .catch(() => (editFicheFailure({id,\r\n                error: 'Oops! Something went wrong and we couldn\\'t edit your fiche'})))\r\n    }\r\n}\r\n"]}