{"version":3,"sources":["topics.js"],"names":[],"mappings":";;;;;QAMgB,G,GAAA,G;QAcA,G,GAAA,G;QAaA,M,GAAA,M;QA+BA,M,GAAA,M;;AAhEhB;;;;AACA;;;;;;AAEA;;;AAGO,SAAS,GAAT,CAAa,GAAb,EAAkB,GAAlB,EAAuB;AAC5B,mBAAM,IAAN,CAAW,EAAX,EAAe,IAAf,CAAoB,UAAC,GAAD,EAAM,MAAN,EAAiB;AACnC,QAAI,GAAJ,EAAS;AACP,cAAQ,GAAR,CAAY,sBAAZ;AACA,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,uCAArB,CAAP;AACD;;AAED,WAAO,IAAI,IAAJ,CAAS,MAAT,CAAP;AACD,GAPD;AAQD;;AAED;;;AAGO,SAAS,GAAT,CAAa,GAAb,EAAkB,GAAlB,EAAuB;AAC5B,mBAAM,MAAN,CAAa,IAAI,IAAjB,EAAuB,UAAC,GAAD,EAAS;AAC9B,QAAI,GAAJ,EAAS;AACP,cAAQ,GAAR,CAAY,GAAZ;AACA,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,CAAP;AACD;AACD,WAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,CAAP;AACD,GAND;AAOD;;AAED;;;AAGO,SAAS,MAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B;AAC/B,MAAM,QAAQ,EAAE,IAAI,IAAI,MAAJ,CAAW,EAAjB,EAAd;AACA,MAAM,cAAc,IAAI,IAAJ,CAAS,WAA7B;AACA,MAAM,SAAS,IAAI,IAAJ,CAAS,MAAxB;AACA,MAAM,WAAW,CAAC,IAAD,EAAO,KAAP,EAAc,IAAd,EAAoB,aAApB,EAAmC,QAAnC,CAAjB;AACA,MAAM,OAAO,iBAAE,IAAF,CAAO,IAAI,IAAX,EAAiB,QAAjB,CAAb;;AAEA,MAAI,MAAJ,EAAY;AACV,qBAAM,gBAAN,CAAuB,KAAvB,EAA8B,IAA9B,EAAoC,UAAC,GAAD,EAAS;AAC3C,UAAI,GAAJ,EAAS;AACP,gBAAQ,GAAR,CAAY,gBAAZ;AACA,eAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,mCAArB,CAAP;AACD;;AAED,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,sBAArB,CAAP;AACD,KAPD;AAQD,GATD,MASO;AACL,qBAAM,gBAAN,CAAuB,KAAvB,EAA8B,EAAE,MAAM,EAAE,OAAO,cAAc,CAAd,GAAkB,CAAC,CAA5B,EAAR,EAA9B,EAAyE,UAAC,GAAD,EAAS;AAChF,UAAI,GAAJ,EAAS;AACP,gBAAQ,GAAR,CAAY,gBAAZ;AACA,eAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,mCAArB,CAAP;AACD;;AAED,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,sBAArB,CAAP;AACD,KAPD;AAQD;AACF;;AAED;;;AAGO,SAAS,MAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B;AAC/B,MAAM,QAAQ,EAAE,IAAI,IAAI,MAAJ,CAAW,EAAjB,EAAd;AACA,mBAAM,gBAAN,CAAuB,KAAvB,EAA8B,UAAC,GAAD,EAAS;AACrC,QAAI,GAAJ,EAAS;AACP,cAAQ,GAAR,CAAY,iBAAZ;AACA,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,qCAArB,CAAP;AACD;;AAED,WAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,sBAArB,CAAP;AACD,GAPD;AAQD;;kBAEc;AACb,UADa;AAEb,UAFa;AAGb,gBAHa;AAIb;AAJa,C","file":"topics-compiled.js","sourcesContent":["import _ from 'lodash';\nimport Topic from '../models/topics';\n\n/**\n * List\n */\nexport function all(req, res) {\n  Topic.find({}).exec((err, topics) => {\n    if (err) {\n      console.log('Error in first query');\n      return res.status(500).send('Something went wrong getting the data');\n    }\n\n    return res.json(topics);\n  });\n}\n\n/**\n * Add a Topic\n */\nexport function add(req, res) {\n  Topic.create(req.body, (err) => {\n    if (err) {\n      console.log(err);\n      return res.status(400).send(err);\n    }\n    return res.status(200).send('OK');\n  });\n}\n\n/**\n * Update a topic\n */\nexport function update(req, res) {\n  const query = { id: req.params.id };\n  const isIncrement = req.body.isIncrement;\n  const isFull = req.body.isFull;\n  const omitKeys = ['id', '_id', '_v', 'isIncrement', 'isFull'];\n  const data = _.omit(req.body, omitKeys);\n\n  if (isFull) {\n    Topic.findOneAndUpdate(query, data, (err) => {\n      if (err) {\n        console.log('Error on save!');\n        return res.status(500).send('We failed to save for some reason');\n      }\n\n      return res.status(200).send('Updated successfully');\n    });\n  } else {\n    Topic.findOneAndUpdate(query, { $inc: { count: isIncrement ? 1 : -1 } }, (err) => {\n      if (err) {\n        console.log('Error on save!');\n        return res.status(500).send('We failed to save for some reason');\n      }\n\n      return res.status(200).send('Updated successfully');\n    });\n  }\n}\n\n/**\n * Remove a topic\n */\nexport function remove(req, res) {\n  const query = { id: req.params.id };\n  Topic.findOneAndRemove(query, (err) => {\n    if (err) {\n      console.log('Error on delete');\n      return res.status(500).send('We failed to delete for some reason');\n    }\n\n    return res.status(200).send('Removed Successfully');\n  });\n}\n\nexport default {\n  all,\n  add,\n  update,\n  remove\n};\n"]}